<?xml version="1.0" ?>
<project name="ExLP"  basedir="../..">

	<property file="resources/properties/ant.properties"/>
	<property file="resources/properties/ws.properties"/>

	<property name="src.dir" location="${basedir}/src" />
	<property name="dist.dir" location="${basedir}/dist/" />
	<property name="build.dir" location="${dist.dir}/build/" />
	<property name="lib.dir" location="${basedir}/lib" />
	<property name="rsrc.dir" location="${basedir}/resources" />
	<property name="xsd.dir" location="${rsrc.dir}/config/xsd" />
	
	<import file="ant-libs.xml"/>
	<import file="ant-classpath.xml"/>
	
    <target name="01 - clean" description="Removes build artifacts">
        <delete dir="${build.dir}"/>
    	<delete dir="${dist.dir}"/>
    </target>
	
    <target name="02 - Init" description="Init ...">
		<mkdir dir="${build.dir}"/>
		<mkdir dir="${dist.dir}"/>
    </target>
	
    <target name="03 - Loc" description="Task definition">
    	<taskdef name="loc" classname="net.sf.exlp.loc.LoccerTask" classpath="${build.dir}" loaderref="${build.dir}"/>
    	<loc>
    		<fileset dir="${basedir}">
    			<include name="**/*.java"/>
    			<include name="**/*.xml"/>
    		</fileset>
    	</loc>
    </target>
	
	<target name="04 - Compile" depends="02 - Init" description="Compile the source">
		<echo level="info">Compiling with ${java-version}</echo>
		<javac	srcdir="${src.dir}"
				destdir="${build.dir}"
				debug="true"
				debuglevel="lines,vars,source" 
				deprecation="on"
				optimize="on"
				target="${java-version}"
				classpathref="classpath">
			<include name="**"/>
		</javac>
	</target>
	
	<target name="05 - Copy Libs" depends="02 - Init">
    	<!-- Utils  -->
    		<copy file="${lib.dir}/${log4j.dir}/${log4j.lib}" todir="${dist.dir}/lib"/>
			<copy file="${lib.dir}/${commonslang.dir}/${commonslang.lib}" todir="${dist.dir}/lib"/>
	</target>  
	
	<target name="06 - ExLP" description="ExLP" depends="04 - Compile,05 - Copy Libs">
		<echo level="info">Create exlp-${exlp-version}.jar</echo>
    	<jar destfile="${dist.dir}/exlp-${exlp-version}.jar">
    		<fileset dir="${build.dir}">
    			<include name="net/sf/exlp/**"/>
    			<exclude name="net/sf/exlp/util/translation/**"/>
    		</fileset>
    		<manifest>
				<attribute name="Built-By" value="${user.name}"/>
				<attribute name="Implementation-Version"  value="${exlp-version}"/>
    			<attribute name="Built-Date" value="${version} ${TODAY}"/> 
			</manifest>        	
		</jar>
	</target>
</project>